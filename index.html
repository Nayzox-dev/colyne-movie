<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lecteur MP4</title>
  <style>
    :root { --bg:#0f1318; --fg:#e8eef7; --muted:#9aa5b1; --panel:#161b22; --accent:#7c5cff; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:980px;margin:40px auto;padding:16px}
    .card{background:var(--panel);border:1px solid #222a33;border-radius:12px;padding:18px}
    h1{margin:0 0 12px;font-size:20px}
    video{width:100%;height:auto;border-radius:10px;outline:none;background:#000}
    .status{margin-top:10px;font-size:14px;color:var(--muted)}
    .status strong{color:#ff6b6b}
    .src{word-break:break-all;font-size:12px;color:#7f8a98}
    .ok{color:#7bd88f}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Lecteur MP4 (URL autorisée uniquement)</h1>

      <video id="player" controls playsinline preload="metadata"></video>

      <div id="status" class="status">Chargement…</div>
      <div class="src" id="src"></div>
    </div>
  </div>

  <script>
    // ⚠️ Remplace l'URL ci-dessous par une source MP4 que TU ES AUTORISÉ à servir.
    const SOURCE_URL = "https://bac359d1e1b32ae49f4763b6a6d10f0e.r2.cloudflarestorage.com/samsung/SERIES/108978/VF/S01/01.mp4?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=e6d9f65300a6cdeb098e4cc45d0a82ab%2F20250816%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20250816T210524Z&X-Amz-SignedHeaders=host&X-Amz-Expires=43200&X-Amz-Signature=c8e2c8cdc520e4ebbd6979e47cd4005c347801aea33e59f7072b5d64e915e325"; // <- bloqué hors Xalaflix

    const video = document.getElementById('player');
    const statusEl = document.getElementById('status');
    const srcEl = document.getElementById('src');

    srcEl.textContent = SOURCE_URL;

    function setStatus(msg, ok=false){
      statusEl.textContent = msg;
      statusEl.className = 'status' + (ok ? ' ok' : '');
    }

    // Tente le chargement ; si l’origine bloque (403/Cloudflare/CORS), on affiche un message clair
    const source = document.createElement('source');
    source.src = SOURCE_URL;
    source.type = 'video/mp4';
    video.appendChild(source);

    video.addEventListener('loadedmetadata', () => setStatus('Source chargée. Lecture possible si autorisée.', true));
    video.addEventListener('error', () => {
      setStatus('Échec de lecture : la source est probablement protégée ou non autorisée depuis ce domaine.');
    });

    // Déclenche la tentative de lecture
    video.load();
  </script>
</body>
</html>
